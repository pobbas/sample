pipeline {
agent any
stages {
stage('Checkout') {
steps {
checkout scmGit(branches: [[name: '*/master']], extensions: [],
userRemoteConfigs: [[url: 'https://github.com/vijaynvb/todoapi.git']])
echo 'successful checkout'
}
}
stage('Build jar and image using Docker file ') {
steps {
script {
def imageTag = "<username/imagename:tag>"
docker.build(imageTag, '.')
echo 'successful Build Docker Image'
}
}
}
stage('Push to Docker Hub') {
steps {
script {
withDockerRegistry(credentialsId: 'ba01f7fb-97f4-4039-bd96-
e8ce7964251e', url: 'https://index.docker.io/v1/') {
def imageTag = "<username/imagename:tag>"
docker.image(imageTag).push()
echo 'successful Push to Docker Hub'
}
}
}
}
}
}
