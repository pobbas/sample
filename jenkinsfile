pipeline {
agent any
stages {
stage('Checkout') {
steps {
checkout scmGit(branches: [[name: '*/master']], extensions: [],
userRemoteConfigs: [[url: 'https://github.com/pobbas/sample']])
echo 'successful checkout'
}
}
stage('Build jar and image using Docker file ') {
steps {
script {
def imageTag = "sreelatha24/todoapijenkins:2.0"
docker.build(imageTag, '.')
echo 'successful Build Docker Image'
}
}
}
stage('Push to Docker Hub') {
steps {
script {
withDockerRegistry(credentialsId: 'docker_hub_cred', url: 'https://index.docker.io/v1/') {
def imageTag = "sreelatha24/todoapijenkins:2.0"
docker.image(imageTag).push()
echo 'successful Push to Docker Hub'
}
}
}
}
}
}
